assert(term.isColor(),"colorful terminal is required (use advanced computer/turtle)")assert(http and http.websocket,"http/websocket extension is required")local term,string=term,string;term.setTextColor(colors.lightBlue)term.setBackgroundColor(colors.black)term.clear()term.setCursorPos(1,1)print("Enter your nickname (letters/digits, max 10):")term.setTextColor(colors.lime)local a=read()local b=assert(http.websocket("ws://cc-place.herokuapp.com"))local c,d=b.send,string.pack;local e=function(f,...)return c(d("!1<"..f,...),true)end;term.setTextColor(colors.white)term.setBackgroundColor(colors.black)term.clear()local g,h=term.getSize()local i=string.rep(" ",g)for j=1,h do term.setCursorPos(1,j)term.write(i)end;g,h=g-2,h-2;local k=g*h;i=string.rep(" ",g)e("BBBs1",1,g,h,a)local l={[keys.left]=function()return e("B",2)end,[keys.right]=function()return e("B",3)end,[keys.up]=function()return e("B",4)end,[keys.down]=function()return e("B",5)end,[keys.leftShift]=function(m)if m then return end;return e("B",6)end,[keys.leftCtrl]=function(m)if m then return end;return e("B",7)end,[keys.space]=function(m)if m then return end;return e("B",8)end,[keys.leftAlt]=function(m)if m then return end;return e("B",9)end}l[keys.a]=l[keys.left]l[keys.d]=l[keys.right]l[keys.w]=l[keys.up]l[keys.s]=l[keys.down]l[keys.rightShift]=l[keys.leftShift]l[keys.rightCtrl]=l[keys.leftCtrl]l[keys.rightAlt]=l[keys.leftAlt]l[keys.f]=l[keys.leftAlt]local n,o=string.sub,string.unpack;local p,q=math.min,math.max;local r={key=function(s,m)local t=l[s]if t then return t(m)end end,websocket_closed=function(u)return error("WebSocket disconnected",-1)end,websocket_message=function(u,v,w)term.setCursorPos(1,1)local x,j,y,z=o("!1<HHBB",n(v,k+1,k+6))local A=n(v,k+7,k+7)local B=n(v,k+8,k+8)local C=n(v,k+9)term.write(string.format(" X%s Y%s%s",x,j,i))local D=2;for E=1,k,g do local F=n(v,E,E+g-1)term.setCursorPos(2,D)term.blit(i,F,F)D=D+1 end;term.setCursorPos(p(q(y+2,2),g+1),p(q(z+2,2),h+1))term.blit("X",(B=="7"or B=="f")and"0"or"f",B)term.setTextColor(1)term.setCursorPos(1,h+2)term.blit(" ",A,A)term.write(" "..C..i)end}local unpack,G=unpack,os.pullEvent;while true do local H={G()}local t=r[H[1]]if t then t(unpack(H,2))end end