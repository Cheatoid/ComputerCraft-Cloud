assert(term.isColor(),"colorful terminal is required (use advanced computer/turtle)")assert(http and http.websocket,"http/websocket extension is required")local term=term;local a,b,c=term.setCursorPos,term.write,term.blit;term.setTextColor(colors.lightBlue)term.setBackgroundColor(colors.black)term.clear()a(1,1)print("Enter your nickname (letters/digits, max 12):")term.setTextColor(colors.lime)local d=read()local e=assert(http.websocket("ws://cc-place.herokuapp.com"))local f,g=e.send,string.pack;local h=function(i,...)return f(g("!1<"..i,...),true)end;term.setTextColor(colors.white)term.setBackgroundColor(colors.black)term.clear()local j,k=term.getSize()local l=string.rep(" ",j)for m=1,k do a(1,m)b(l)end;j,k=j-2,k-2;local n=j*k;l=string.rep(" ",j)h("BBBBs1",1,2,j,k,d)local o={[keys.left]=function()return h("B",2)end,[keys.right]=function()return h("B",3)end,[keys.up]=function()return h("B",4)end,[keys.down]=function()return h("B",5)end,[keys.leftShift]=function(p)if p then return end;return h("B",6)end,[keys.leftCtrl]=function(p)if p then return end;return h("B",7)end,[keys.space]=function(p)if p then return end;return h("B",8)end,[keys.leftAlt]=function(p)if p then return end;return h("B",9)end}o[keys.a]=o[keys.left]o[keys.d]=o[keys.right]o[keys.w]=o[keys.up]o[keys.s]=o[keys.down]o[keys.rightShift]=o[keys.leftShift]o[keys.rightCtrl]=o[keys.leftCtrl]o[keys.rightAlt]=o[keys.leftAlt]o[keys.f]=o[keys.leftAlt]local q,r,s,t,u,v,w,x=string.byte,string.sub,string.unpack,string.format,math.min,math.max;local y={key=function(z,p)local A=o[z]if A then return A(p)end end,mouse_click=function(B,C,m)if B==2 then w,x=C,m end;if B==1 then return h("B",8)end;if B==3 then return h("B",9)end end,mouse_drag=function(B,C,m)if B==2 and x then if w~=C then h("B",w<C and 2 or 3)w=C end;if x~=m then h("B",x<m and 4 or 5)x=m end end end,mouse_up=function(B)if B==2 then w,x=nil end end,mouse_scroll=function(D)return h("B",D>0 and 7 or 6)end,websocket_closed=function()return error("WebSocket disconnected",-1)end,websocket_message=function(E,F)local G=r(F,n+1)if#F<n+9 or q(G,-1)~=0 then return end;a(2,1)local C,m,H,I,J,K,L=s("!1<HHBBc1c1z",G)b(t("X%d Y%d%s",C,m,l))local M=2;for N=1,n,j do local O=r(F,N,N+j-1)a(2,M)c(l,O,O)M=M+1 end;a(u(v(H+2,2),j+1),u(v(I+2,2),k+1))c("X",(K=="7"or K=="f")and"0"or"f",K)a(1,k+2)c(" ",J,J)term.setTextColor(1)b(" "..L..l)end,terminate=function()e.close()return error("Terminated",-1)end}if _CC_DISABLE_LUA51_FEATURES then local P,Q,R=table.pack,table.unpack,coroutine.yield;while true do local S=P(R())local A=y[S[1]]if A then A(Q(S,2))end end else local unpack,R=unpack,coroutine.yield;while true do local S={R()}local A=y[S[1]]if A then A(unpack(S,2))end end end